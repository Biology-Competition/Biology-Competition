<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARBC Test Quiz</title>
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js"></script>


  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .warning {
      color: red;
      font-weight: bold;
      display: none;
    }
    button {
      background-color: #28a745;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Biology Competition Quiz</h2>
    <p><b>Rules:</b> No switching tabs. Your activity is being monitored.</p>

    <div id="warning" class="warning">⚠️ Warning: Rule Violation Detected!</div>

    <form id="quiz-form">
      <label><b>Name:</b></label>
      <input type="text" id="name" required><br><br>

      <label>1. What is the powerhouse of the cell?</label><br>
      <input type="radio" name="q1" value="Mitochondria" required> Mitochondria<br>
      <input type="radio" name="q1" value="Peroxisome"> Peroxisome<br>
      <input type="radio" name="q1" value="Golgi Body"> Golgi Body<br><br>

      <label>2. DNA is made up of?</label><br>
      <input type="radio" name="q2" value="Amino Acids"> Amino Acids<br>
      <input type="radio" name="q2" value="Nucleotides" required> Nucleotides<br>
      <input type="radio" name="q2" value="Lipids"> Lipids<br><br>

      <label>3. Which organ filters blood in the human body?</label><br>
      <input type="radio" name="q3" value="Liver"> Liver<br>
      <input type="radio" name="q3" value="Kidney" required> Kidney<br>
      <input type="radio" name="q3" value="Heart"> Heart<br><br>

      <label>4. What carries oxygen in the blood?</label><br>
      <input type="radio" name="q4" value="White Blood Cells"> White Blood Cells<br>
      <input type="radio" name="q4" value="Hemoglobin" required> Hemoglobin<br>
      <input type="radio" name="q4" value="Platelets"> Platelets<br><br>

      <label>5. What is the primary function of ribosomes?</label><br>
      <input type="radio" name="q5" value="Protein Synthesis" required> Protein Synthesis<br>
      <input type="radio" name="q5" value="DNA Replication"> DNA Replication<br>
      <input type="radio" name="q5" value="Energy Production"> Energy Production<br><br>

      <button type="submit">Submit</button>
    </form>
    
    <p id="result"></p>
  </div>

    <footer class="footer pt-150 gray-bg">
      <img src="assets/img/shape/footer-bg.svg" alt="" class="footer-bg">
      <div class="container">
        <div class="row">
          <div class="col-xl-12">
            <div class="footer-links text-center">
              <a href="./" class="logo">
                <img src="assets/img/logo/logo.svg" alt="" height="100px">
              </a>
              <nav class="footer-menu">
                <ul>
                  <li><a href="./">Home</a></li>
                  <li><a href="competition.html">Competition</a></li>
                  <li><a href="resources.html">Resources</a></li>
                  <li><a href="sponsors.html">Sponsors</a></li>
                  <li><a href="about.html">About</a></li>
                  <li><a href="regions.html">Regions</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
        <div class="copyright-area text-center">
          <p class="mb-0">&copy; 2024 American Regional Biology Competition</p>
        </div>
      </div>
    </footer>
    
    <a href="#" class="scroll-top">
      <i class="lni lni-chevron-up"></i>
    </a>

    <script src="assets/js/bootstrap.bundle-5.0.0.alpha-1-min.js"></script>
    <script src="assets/js/count-up.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.js" integrity="sha512-8Z5++K1rB3U+USaLKG6oO8uWWBhdYsM3hmdirnOEWp8h2B1aOikj5zBzlXs8QOrvY9OxEnD2QDkbSKKpfqcIWw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
     
      $(function() {
        $("#header").load("../assets/insertables/header.html");
      });

     
      const warningMsg = document.getElementById("warning-msg");
      const logDiv = document.getElementById("log");

      
      function sendLogEvent(eventType) {
        fetch('http://localhost:8000/log-event', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ eventType })
        })
        .then(response => response.json())
        .then(data => console.log('Logged event:', data))
        .catch(error => console.error('Error logging event:', error));
      }

      
      document.addEventListener("visibilitychange", function() {
        if (document.visibilityState === "hidden") {
          warningMsg.style.display = "block";
          warningMsg.textContent = "Warning: Tab switching detected!";
          sendLogEvent("tab_switch");
          const time = new Date().toLocaleTimeString();
          const newLog = document.createElement("p");
          newLog.textContent = `${time} - Tab switch detected`;
          logDiv.appendChild(newLog);
        }
      });

      // Cursor exit detection
      document.addEventListener("mouseleave", function(e) {
        if (e.clientY <= 0) {
          warningMsg.style.display = "block";
          warningMsg.textContent = "Warning: Cursor left the window!";
          sendLogEvent("cursor_exit");
          const time = new Date().toLocaleTimeString();
          const newLog = document.createElement("p");
          newLog.textContent = `${time} - Cursor left the window`;
          logDiv.appendChild(newLog);
        }
      });

     
      document.getElementById("test-form").addEventListener("submit", function(e) {
        e.preventDefault();
        const formData = new FormData(e.target);
        const responses = {};
        formData.forEach((value, key) => responses[key] = value);

       
        const time = new Date().toLocaleTimeString();
        const submissionLog = document.createElement("p");
        submissionLog.textContent = `${time} - Form submitted: ${JSON.stringify(responses)}`;
        logDiv.appendChild(submissionLog);

        
        fetch('http://localhost:8000/submit-responses', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(responses)
        })
        .then(response => response.json())
        .then(data => console.log('Submission logged:', data))
        .catch(error => console.error('Error submitting form:', error));

       
        warningMsg.style.display = "none";
      });
    </script>
  </body>
</html>
